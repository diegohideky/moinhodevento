{% extends 'rotas/base_user.html' %}
{% block navbar %}
    <li><a href="/stages/{{ id_course }}" title="Stages"><i class="fa fa-shield"></i> Stages</a></li>
    <li><a href="/lessons/{{ exercise.lesson.stage.id }}" title="Lessons"><i class="fa fa-bookmark"></i> Lessons</a></li>
    <li><a href="/exercises/{{ exercise.lesson.id }}" title="Exercises"><i class="fa fa-star"></i> Exercises</a></li>
    <li><a href="/grammarspots" title="Grammar Spots"><i class="fa fa-quote-right"></i> Grammar Spots</a></li>
    <li><a href="/videoclasses" title="Video Classes"><i class="fa fa-video-camera"></i> Video Classes</a></li>
    <li><a href="/vocabularies" title="Vocabularies"><i class="fa fa-sort-alpha-asc"></i> Vocabularies</a></li>
    <li role="separator" class="divider"></li>
{% endblock %}
{% block main %}
    <!--MAIN-->
    <br>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8 text-center section col-md-offset-2">
                {% if error %}
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-danger"><strong>Sorry!</strong> {{ error }}</li>
                    </ul>
                {% else %}
                {% if congrats %}
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-success"><strong>{{ congrats }}</strong> You've completed all the exercises</li>
                    </ul>
                {% endif %}
                <h3>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped active {% if progress == 100 %}progress-bar-success{% endif %}" role="progressbar"
                                aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ progress }}%;">
                            {{ progress }}%
                        </div>
                    </div>
                    <p><strong>{{ exercise.title }}</strong></p>
                    <p>{{ exercise.description }}</p>
                    <br>
                    <p><input type="text" class="form-control" placeholder="click on the microphone to speak" id="answer_check" autofocus onkeydown='check_speaking({{ exercise.id }})'></p>
                </h3>
                <div class="hidden" id="showCorrect">
                    <p>
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-success">
                                <p><strong>Correct! Possible answers:</strong></p>
                                <append id="correct_answers"></append>
                            </li>
                        </ul>
                    </p>
                </div>
                <div class="hidden" id="showWrong">
                    <p>
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-danger">
                                <p><strong>Sorry! You should've answered:</strong></p>
                                <append id="wrong_answers"></append>
                            </li>
                        </ul>
                    </p>
                </div>
                <p><button class="btn btn-info btn-circle btn-huge" onclick='startDictation("{{ answers }}")'><i class="fa fa-microphone"></i></button></p>
                <p><button class="btn btn-success btn-long" onclick='check_speaking({{ exercise.id }})' id="btn-check">Check</button></p>
                <p><button class="btn btn-default btn-long" onclick='skip("speaking")'>Skip</button></p>
                {% endif %}
            </div>
        </div>
        <br>
        <br>
        <br>
        <div class="row text-center bottom-text">
            <h4><p>Don't forget to check</p>
            <p>Grammar Spot, Video Class and Vocabulary</p>
            <p>Before doing the exercises</p></h4>
        </div>
    </div>
    <!--MAIN-->
{% endblock %}